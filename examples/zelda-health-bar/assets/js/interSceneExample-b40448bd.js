var S=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var n=(e,t,s)=>(S(e,t,"read from private field"),s?s.call(e):t.get(e)),H=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},c=(e,t,s,r)=>(S(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s);import{P as l}from"../phaser.71e9a3cd.js";const L={LOSE_HEALTH:"LOSE_HEALTH"},_=new Phaser.Events.EventEmitter;var a,h;class A{constructor(){H(this,a,void 0);H(this,h,void 0);c(this,a,6),c(this,h,6)}get maxHealth(){return n(this,h)}get currentHealth(){return n(this,a)}loseHealth(){n(this,a)!==0&&(c(this,a,n(this,a)-1),_.emit(L.LOSE_HEALTH,n(this,a),n(this,a)+1))}}a=new WeakMap,h=new WeakMap;const u=new A,o="ASSET_KEY",E={LOSE_FIRST_HALF:"LOSE_FIRST_HALF",LOSE_SECOND_HALF:"LOSE_SECOND_HALF"};class O extends Phaser.Scene{constructor(){super({key:"Ui",active:!0})}preload(){this.load.spritesheet(o,"assets/images/heart.png",{frameWidth:7,frameHeight:7})}create(){this.anims.create({key:E.LOSE_FIRST_HALF,frames:this.anims.generateFrameNumbers(o,{start:0,end:2}),frameRate:10}),this.anims.create({key:E.LOSE_SECOND_HALF,frames:this.anims.generateFrameNumbers(o,{start:2,end:4}),frameRate:10});const t=Math.round(u.maxHealth/2),s=[];for(let r=0;r<t;r++){const i=this.add.sprite(10+r*63,10,o,0).setScale(8).setOrigin(0);s.push(i)}_.on(L.LOSE_HEALTH,(r,i)=>{console.log("event received",r,i);const m=Math.round(i/2)-1;i%2===1?s[m].play(E.LOSE_SECOND_HALF):s[m].play(E.LOSE_FIRST_HALF)})}}class d extends Phaser.Scene{constructor(){super({key:"Game",active:!0})}create(){this.input.on(Phaser.Input.Events.POINTER_DOWN,()=>{u.loseHealth()})}}const T={type:l.CANVAS,pixelArt:!0,scale:{parent:"game-container",width:800,height:600},backgroundColor:"#5c5b5b",scene:[d,O]};new l.Game(T);
