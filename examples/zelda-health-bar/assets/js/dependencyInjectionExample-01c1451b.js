var d=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var a=(e,t,s)=>(d(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},i=(e,t,s,n)=>(d(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s);import{P as _}from"../phaser.71e9a3cd.js";const g={LOSE_HEALTH:"LOSE_HEALTH"};new Phaser.Events.EventEmitter;const u="ASSET_KEY",L={LOSE_FIRST_HALF:"LOSE_FIRST_HALF",LOSE_SECOND_HALF:"LOSE_SECOND_HALF"};var E,m;class p extends Phaser.Scene{constructor(s,n){super({key:"Ui",active:!0});h(this,E,void 0);h(this,m,void 0);i(this,E,s),i(this,m,n)}preload(){this.load.spritesheet(u,"assets/images/heart.png",{frameWidth:7,frameHeight:7})}create(){this.anims.create({key:L.LOSE_FIRST_HALF,frames:this.anims.generateFrameNumbers(u,{start:0,end:2}),frameRate:10}),this.anims.create({key:L.LOSE_SECOND_HALF,frames:this.anims.generateFrameNumbers(u,{start:2,end:4}),frameRate:10});const s=Math.round(a(this,m).maxHealth/2),n=[];for(let c=0;c<s;c++){const o=this.add.sprite(10+c*63,10,u,0).setScale(8).setOrigin(0);n.push(o)}a(this,E).on(g.LOSE_HEALTH,(c,o)=>{console.log("event received",c,o);const O=Math.round(o/2)-1;o%2===1?n[O].play(L.LOSE_SECOND_HALF):n[O].play(L.LOSE_FIRST_HALF)})}}E=new WeakMap,m=new WeakMap;var H;class F extends Phaser.Scene{constructor(s){super({key:"Game",active:!0});h(this,H,void 0);i(this,H,s)}create(){this.input.on(Phaser.Input.Events.POINTER_DOWN,()=>{a(this,H).loseHealth()})}}H=new WeakMap;var S,r,l;class N{constructor(t){h(this,S,void 0);h(this,r,void 0);h(this,l,void 0);i(this,r,6),i(this,l,6),i(this,S,t)}get maxHealth(){return a(this,l)}get currentHealth(){return a(this,r)}loseHealth(){a(this,r)!==0&&(i(this,r,a(this,r)-1),a(this,S).emit(g.LOSE_HEALTH,a(this,r),a(this,r)+1))}}S=new WeakMap,r=new WeakMap,l=new WeakMap;const v={type:_.CANVAS,pixelArt:!0,scale:{parent:"game-container",width:800,height:600},backgroundColor:"#5c5b5b"},A=new _.Game(v),T=new _.Events.EventEmitter,f=new N(T);A.scene.add("Game",new F(f));A.scene.add("Ui",new p(T,f));A.scene.start("Game");
